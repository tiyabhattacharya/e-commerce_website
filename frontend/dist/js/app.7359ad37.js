(()=>{"use strict";var t={451:(t,e,a)=>{var r=a(751),s=a(641);const o={id:"app"};function i(t,e,a,r,i,c){const l=(0,s.g2)("nav-bar"),n=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(l),(0,s.bF)(n)])}var c=a(33);const l={class:"navbar"},n={class:"container nav-content"},d={class:"nav-links"},u={key:0,class:"cart-badge"},p=["disabled"];function h(t,e,a,r,o,i){const h=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",l,[(0,s.Lk)("div",n,[(0,s.Lk)("div",{class:"nav-brand",onClick:e[0]||(e[0]=e=>t.$router.push("/"))},[...e[2]||(e[2]=[(0,s.Lk)("span",{class:"brand-icon"},"ðŸ›’",-1),(0,s.Lk)("span",{class:"brand-text"},"ShopHub",-1)])]),(0,s.Lk)("div",d,[(0,s.bF)(h,{to:"/",class:"nav-link"},{default:(0,s.k6)(()=>[...e[3]||(e[3]=[(0,s.eW)("Home",-1)])]),_:1}),t.isAuthenticated?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(h,{to:"/cart",class:"nav-link cart-link"},{default:(0,s.k6)(()=>[e[4]||(e[4]=(0,s.eW)(" Cart ",-1)),t.cartItemCount?((0,s.uX)(),(0,s.CE)("span",u,(0,c.v_)(t.cartItemCount),1)):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(h,{to:"/orders",class:"nav-link"},{default:(0,s.k6)(()=>[...e[5]||(e[5]=[(0,s.eW)("Orders",-1)])]),_:1}),(0,s.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.handleLogout&&i.handleLogout(...t)),class:"btn btn-outline",disabled:o.loading},(0,c.v_)(o.loading?"Logging out...":"Logout"),9,p)],64)):((0,s.uX)(),(0,s.Wv)(h,{key:1,to:"/login",class:"btn btn-primary"},{default:(0,s.k6)(()=>[...e[6]||(e[6]=[(0,s.eW)("Login",-1)])]),_:1}))])])])}var m=a(278),g=a(335);const k={name:"NavBar",data(){return{loading:!1}},computed:{...(0,m.L8)(["isAuthenticated","cartItemCount"])},methods:{async handleLogout(){this.loading=!0;try{await g.A.get("/api/"),await this.$store.dispatch("logout"),this.$router.push("/login")}catch(t){console.error("Logout error:",t),alert(t?.response?.data?.error||"Logout failed. Try again.")}finally{this.loading=!1}}}};var y=a(262);const f=(0,y.A)(k,[["render",h],["__scopeId","data-v-06dc3c30"]]),L=f,b={name:"App",components:{NavBar:L},async created(){try{await g.A.get("/api/"),await this.$store.dispatch("checkAuth")}catch(t){console.error("App init error (CSRF/auth):",t)}}},v=(0,y.A)(b,[["render",i]]),C=v;var _=a(499);const P={class:"home"},E={class:"container"},S={key:0,class:"most-bought-section"},w={class:"most-bought-grid"},T=["src","alt"],A={class:"most-bought-info"},O={class:"price"},$={class:"main-content"},F={class:"sidebar"},x={class:"products-section"},M={key:0,class:"spinner"},R={key:1,class:"products-grid"},X={key:2,class:"no-products"};function I(t,e,a,r,o,i){const l=(0,s.g2)("filter-sidebar"),n=(0,s.g2)("product-card");return(0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("div",E,[t.mostBought.length?((0,s.uX)(),(0,s.CE)("section",S,[e[1]||(e[1]=(0,s.Lk)("h2",{class:"section-title"},"ðŸ”¥ Most Bought Products",-1)),(0,s.Lk)("div",w,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.mostBought.slice(0,5),t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"most-bought-card"},[(0,s.Lk)("img",{src:t.image_url,alt:t.title},null,8,T),(0,s.Lk)("div",A,[(0,s.Lk)("h4",null,(0,c.v_)(t.title),1),(0,s.Lk)("p",O,"$"+(0,c.v_)(i.formatPrice(t.price)),1)])]))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",$,[(0,s.Lk)("aside",F,[(0,s.bF)(l)]),(0,s.Lk)("main",x,[e[3]||(e[3]=(0,s.Lk)("h2",{class:"section-title"},"All Products",-1)),t.loading?((0,s.uX)(),(0,s.CE)("div",M)):t.products.length?((0,s.uX)(),(0,s.CE)("div",R,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.products,t=>((0,s.uX)(),(0,s.Wv)(n,{key:t.id,product:t},null,8,["product"]))),128))])):((0,s.uX)(),(0,s.CE)("div",X,[e[2]||(e[2]=(0,s.Lk)("p",null,"No products found matching your filters.",-1)),(0,s.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.resetFilters&&i.resetFilters(...t)),class:"btn btn-primary"},"Reset Filters")]))])])])])}const N={class:"product-card"},U={class:"product-image-wrapper"},q=["src","alt"],D={key:0,class:"sale-badge"},B={class:"product-info"},Q={class:"product-title"},H={class:"product-category"},W={class:"product-description"},V={class:"product-footer"},j={class:"product-price"},J=["disabled"];function K(t,e,a,r,o,i){return(0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("div",U,[(0,s.Lk)("img",{src:a.product.image_url,alt:a.product.title,class:"product-image"},null,8,q),a.product.is_sale?((0,s.uX)(),(0,s.CE)("span",D,"SALE")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",B,[(0,s.Lk)("h3",Q,(0,c.v_)(a.product.title),1),(0,s.Lk)("p",H,(0,c.v_)(a.product.category),1),(0,s.Lk)("p",W,(0,c.v_)(i.truncatedDescription),1),(0,s.Lk)("div",V,[(0,s.Lk)("span",j,"$"+(0,c.v_)(i.formatPrice(a.product.price)),1),t.isAuthenticated?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>i.addToCart&&i.addToCart(...t)),disabled:o.loading,class:"btn btn-primary btn-sm"},(0,c.v_)(o.loading?"Adding...":"Add to Cart"),9,J)):((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:e[1]||(e[1]=e=>t.$router.push("/login")),class:"btn btn-outline btn-sm"}," Login to Buy "))])])])}const G={name:"ProductCard",props:{product:{type:Object,required:!0}},data(){return{loading:!1}},computed:{...(0,m.L8)(["isAuthenticated"]),truncatedDescription(){return this.product.description.length>80?this.product.description.substring(0,80)+"...":this.product.description}},methods:{formatPrice(t){return parseFloat(t).toFixed(2)},async addToCart(){this.loading=!0;try{await this.$store.dispatch("addToCart",this.product.id),alert("Added to cart!")}catch(t){const e=t?.response?.data?.error||t?.response?.data?.detail,a=t?.response?.status;401===a||403===a?this.$router.push("/login"):alert(e||"Error adding to cart")}finally{this.loading=!1}}}},Y=(0,y.A)(G,[["render",K],["__scopeId","data-v-df763686"]]),z=Y,Z={class:"filter-sidebar"},tt={class:"filter-section"},et={class:"filter-section"},at={class:"category-list"},rt=["onClick"],st={class:"filter-section"},ot={class:"filter-label"},it={class:"price-inputs"},ct={class:"filter-section"},lt={class:"checkbox-group"},nt={class:"checkbox-label"};function dt(t,e,a,o,i,l){return(0,s.uX)(),(0,s.CE)("div",Z,[e[14]||(e[14]=(0,s.Lk)("h2",{class:"filter-title"},"Filters",-1)),(0,s.Lk)("div",tt,[e[10]||(e[10]=(0,s.Lk)("label",{class:"filter-label"},"Search",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.localSearch=t),onInput:e[1]||(e[1]=(...t)=>l.debouncedSearch&&l.debouncedSearch(...t)),type:"text",placeholder:"Search products...",class:"form-input"},null,544),[[r.Jo,i.localSearch]])]),(0,s.Lk)("div",et,[e[11]||(e[11]=(0,s.Lk)("label",{class:"filter-label"},"Category",-1)),(0,s.Lk)("div",at,[(0,s.Lk)("button",{onClick:e[2]||(e[2]=t=>l.selectCategory("")),class:(0,c.C4)(["category-btn",{active:!t.filters.category}])}," All ",2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.categories,e=>((0,s.uX)(),(0,s.CE)("button",{key:e,onClick:t=>l.selectCategory(e),class:(0,c.C4)(["category-btn",{active:t.filters.category===e}])},(0,c.v_)(e),11,rt))),128))])]),(0,s.Lk)("div",st,[(0,s.Lk)("label",ot," Price Range: $"+(0,c.v_)(i.localMinPrice)+" - $"+(0,c.v_)(i.localMaxPrice),1),(0,s.Lk)("div",it,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>i.localMinPrice=t),onChange:e[4]||(e[4]=(...t)=>l.updatePriceRange&&l.updatePriceRange(...t)),type:"range",min:"0",max:"2000",step:"50",class:"price-slider"},null,544),[[r.Jo,i.localMinPrice,void 0,{number:!0}]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.localMaxPrice=t),onChange:e[6]||(e[6]=(...t)=>l.updatePriceRange&&l.updatePriceRange(...t)),type:"range",min:"0",max:"2000",step:"50",class:"price-slider"},null,544),[[r.Jo,i.localMaxPrice,void 0,{number:!0}]])])]),(0,s.Lk)("div",ct,[e[13]||(e[13]=(0,s.Lk)("label",{class:"filter-label"},"Special Offers",-1)),(0,s.Lk)("div",lt,[(0,s.Lk)("label",nt,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>i.onSale=t),onChange:e[8]||(e[8]=(...t)=>l.updateSaleFilter&&l.updateSaleFilter(...t))},null,544),[[r.lH,i.onSale]]),e[12]||(e[12]=(0,s.Lk)("span",null,"On Sale Only",-1))])])]),(0,s.Lk)("button",{onClick:e[9]||(e[9]=(...t)=>l.resetFilters&&l.resetFilters(...t)),class:"btn btn-danger btn-block"}," Reset Filters ")])}const ut={name:"FilterSidebar",data(){return{categories:["Electronics","Fashion","Home","Sports"],localSearch:"",localMinPrice:0,localMaxPrice:2e3,onSale:!1,debounceTimer:null}},computed:{...(0,m.aH)(["filters"])},methods:{selectCategory(t){this.$store.commit("SET_FILTERS",{category:t}),this.$store.dispatch("fetchProducts")},debouncedSearch(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.$store.commit("SET_FILTERS",{search:this.localSearch}),this.$store.dispatch("fetchProducts")},500)},updatePriceRange(){if(this.localMinPrice>this.localMaxPrice){const t=this.localMinPrice;this.localMinPrice=this.localMaxPrice,this.localMaxPrice=t}this.$store.commit("SET_FILTERS",{minPrice:this.localMinPrice,maxPrice:this.localMaxPrice}),this.$store.dispatch("fetchProducts")},updateSaleFilter(){this.$store.commit("SET_FILTERS",{isSale:!!this.onSale||null}),this.$store.dispatch("fetchProducts")},resetFilters(){this.localSearch="",this.localMinPrice=0,this.localMaxPrice=2e3,this.onSale=!1,this.$store.commit("SET_FILTERS",{category:"",minPrice:0,maxPrice:2e3,search:"",isSale:null}),this.$store.dispatch("fetchProducts")}},mounted(){this.localMinPrice=this.filters.minPrice,this.localMaxPrice=this.filters.maxPrice,this.localSearch=this.filters.search,this.onSale=!0===this.filters.isSale},watch:{filters:{handler(t){this.localMinPrice=t.minPrice??0,this.localMaxPrice=t.maxPrice??2e3,this.localSearch=t.search??"",this.onSale=!0===t.isSale},deep:!0}},beforeUnmount(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null)}},pt=(0,y.A)(ut,[["render",dt],["__scopeId","data-v-08e51d11"]]),ht=pt,mt={name:"Home",components:{ProductCard:z,FilterSidebar:ht},computed:{...(0,m.aH)(["products","mostBought","loading"])},methods:{formatPrice(t){const e=Number(t||0);return isNaN(e)?"0.00":e.toFixed(2)},resetFilters(){this.$store.commit("SET_FILTERS",{category:"",minPrice:0,maxPrice:2e3,search:"",isSale:null}),this.$store.dispatch("fetchProducts")}},async created(){try{await this.$store.dispatch("checkAuth")}catch(t){}try{await Promise.all([this.$store.dispatch("fetchProducts"),this.$store.dispatch("fetchMostBought")])}catch(e){console.error("Error loading products:",e)}}},gt=(0,y.A)(mt,[["render",I],["__scopeId","data-v-e4d0abcc"]]),kt=gt,yt={class:"login-page"},ft={class:"login-container"},Lt={class:"login-card"},bt={class:"form-group"},vt={class:"form-group"},Ct={class:"form-group"},_t=["disabled"],Pt={key:0,class:"error-message"};function Et(t,e,a,o,i,l){return(0,s.uX)(),(0,s.CE)("div",yt,[(0,s.Lk)("div",ft,[(0,s.Lk)("div",Lt,[e[8]||(e[8]=(0,s.Lk)("div",{class:"login-header"},[(0,s.Lk)("h1",null,"Welcome Back!"),(0,s.Lk)("p",null,"Login to continue shopping")],-1)),(0,s.Lk)("form",{onSubmit:e[3]||(e[3]=(0,r.D$)((...t)=>l.handleLogin&&l.handleLogin(...t),["prevent"])),class:"login-form"},[(0,s.Lk)("div",bt,[e[4]||(e[4]=(0,s.Lk)("label",{class:"form-label"},"Mobile Number",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.mobile=t),type:"tel",placeholder:"Enter your mobile number",class:"form-input",required:""},null,512),[[r.Jo,i.mobile]])]),(0,s.Lk)("div",vt,[e[5]||(e[5]=(0,s.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.fullName=t),type:"text",placeholder:"Enter your full name",class:"form-input",required:""},null,512),[[r.Jo,i.fullName]])]),(0,s.Lk)("div",Ct,[e[6]||(e[6]=(0,s.Lk)("label",{class:"form-label"},"OTP",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.otp=t),type:"text",placeholder:"Enter OTP (123456)",class:"form-input",required:""},null,512),[[r.Jo,i.otp]]),e[7]||(e[7]=(0,s.Lk)("small",{class:"form-hint"},"Demo OTP: 123456",-1))]),(0,s.Lk)("button",{type:"submit",disabled:i.loading,class:"btn btn-primary btn-block btn-large"},(0,c.v_)(i.loading?"Logging in...":"Login"),9,_t),i.error?((0,s.uX)(),(0,s.CE)("p",Pt,(0,c.v_)(i.error),1)):(0,s.Q3)("",!0)],32),e[9]||(e[9]=(0,s.Lk)("div",{class:"login-footer"},[(0,s.Lk)("p",null,"Demo Credentials:"),(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"Mobile:"),(0,s.eW)(" 9999999999")]),(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"OTP:"),(0,s.eW)(" 123456")])],-1))])])])}const St={name:"Login",data(){return{mobile:"",fullName:"",otp:"",loading:!1,error:""}},methods:{async handleLogin(){this.loading=!0,this.error="";try{const t={mobile:this.mobile,otp:this.otp,full_name:this.fullName||"User"};await this.$store.dispatch("login",t),this.$router.push("/")}catch(t){this.error=t?.response?.data?.error||t?.response?.data?.detail||"Login failed. Please try again."}finally{this.loading=!1}}}},wt=(0,y.A)(St,[["render",Et],["__scopeId","data-v-5967fba6"]]),Tt=wt,At={class:"cart-page"},Ot={class:"container"},$t={key:0,class:"empty-cart"},Ft={key:1,class:"cart-content"},xt={class:"cart-items"},Mt=["src","alt"],Rt={class:"item-details"},Xt={class:"item-category"},It={class:"item-price"},Nt={class:"item-actions"},Ut={class:"quantity-control"},qt=["onClick"],Dt={class:"quantity"},Bt=["onClick"],Qt=["onClick"],Ht={class:"item-total"},Wt={class:"cart-summary"},Vt={class:"summary-row"},jt={class:"summary-row total"},Jt={class:"payment-options"},Kt={class:"radio-label"},Gt={class:"radio-label"},Yt=["disabled"];function zt(t,e,a,o,i,l){return(0,s.uX)(),(0,s.CE)("div",At,[(0,s.Lk)("div",Ot,[e[11]||(e[11]=(0,s.Lk)("h1",{class:"page-title"},"Shopping Cart",-1)),0===t.cart.length?((0,s.uX)(),(0,s.CE)("div",$t,[e[4]||(e[4]=(0,s.Lk)("div",{class:"empty-icon"},"ðŸ›’",-1)),e[5]||(e[5]=(0,s.Lk)("h2",null,"Your cart is empty",-1)),e[6]||(e[6]=(0,s.Lk)("p",null,"Add some products to get started!",-1)),(0,s.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/")),class:"btn btn-primary"}," Continue Shopping ")])):((0,s.uX)(),(0,s.CE)("div",Ft,[(0,s.Lk)("div",xt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.cart,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:"cart-item"},[(0,s.Lk)("img",{src:t.product.image_url,alt:t.product.title,class:"item-image"},null,8,Mt),(0,s.Lk)("div",Rt,[(0,s.Lk)("h3",null,(0,c.v_)(t.product.title),1),(0,s.Lk)("p",Xt,(0,c.v_)(t.product.category),1),(0,s.Lk)("p",It,"$"+(0,c.v_)(l.formatPrice(t.product.price)),1)]),(0,s.Lk)("div",Nt,[(0,s.Lk)("div",Ut,[(0,s.Lk)("button",{onClick:e=>l.decreaseQuantity(t.id),class:"qty-btn"},"-",8,qt),(0,s.Lk)("span",Dt,(0,c.v_)(t.quantity),1),(0,s.Lk)("button",{onClick:e=>l.increaseQuantity(t.id),class:"qty-btn"},"+",8,Bt)]),(0,s.Lk)("button",{onClick:e=>l.removeItem(t.id),class:"btn-remove"}," Remove ",8,Qt)]),(0,s.Lk)("div",Ht," $"+(0,c.v_)(l.formatPrice(t.product.price*t.quantity)),1)]))),128))]),(0,s.Lk)("div",Wt,[e[10]||(e[10]=(0,s.Lk)("h2",null,"Order Summary",-1)),(0,s.Lk)("div",Vt,[(0,s.Lk)("span",null,"Items ("+(0,c.v_)(t.cartItemCount)+")",1),(0,s.Lk)("span",null,"$"+(0,c.v_)(l.formatPrice(t.cartTotal)),1)]),(0,s.Lk)("div",jt,[e[7]||(e[7]=(0,s.Lk)("span",null,"Total",-1)),(0,s.Lk)("span",null,"$"+(0,c.v_)(l.formatPrice(t.cartTotal)),1)]),(0,s.Lk)("div",Jt,[(0,s.Lk)("label",Kt,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=t=>i.paymentMode=t),value:"COD"},null,512),[[r.XL,i.paymentMode]]),e[8]||(e[8]=(0,s.Lk)("span",null,"Cash on Delivery",-1))]),(0,s.Lk)("label",Gt,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=t=>i.paymentMode=t),value:"ONLINE"},null,512),[[r.XL,i.paymentMode]]),e[9]||(e[9]=(0,s.Lk)("span",null,"Online Payment",-1))])]),(0,s.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>l.checkout&&l.checkout(...t)),disabled:i.loading,class:"btn btn-success btn-block btn-large"},(0,c.v_)(i.loading?"Processing...":"Place Order"),9,Yt)])]))])])}const Zt={name:"Cart",data(){return{loading:!1,paymentMode:"COD"}},computed:{...(0,m.aH)(["cart"]),...(0,m.L8)(["cartTotal","cartItemCount"])},methods:{formatPrice(t){const e=Number(t||0);return isNaN(e)?"0.00":e.toFixed(2)},async increaseQuantity(t){try{await this.$store.dispatch("updateCartQuantity",{id:t,action:"increase"})}catch(e){this.handleActionError(e)}},async decreaseQuantity(t){try{await this.$store.dispatch("updateCartQuantity",{id:t,action:"decrease"})}catch(e){this.handleActionError(e)}},async removeItem(t){if(confirm("Remove this item from cart?"))try{await this.$store.dispatch("removeFromCart",t)}catch(e){this.handleActionError(e)}},async checkout(){this.loading=!0;try{await this.$store.dispatch("placeOrder",this.paymentMode),alert("Order placed successfully!"),this.$router.push("/orders")}catch(t){this.handleActionError(t,"Error placing order. Please try again.")}finally{this.loading=!1}},handleActionError(t,e=null){const a=t?.response?.data?.error||t?.response?.data?.detail,r=t?.response?.status;if(401===r||403===r)return alert(a||"Please login to continue."),void this.$router.push({name:"Login",query:{redirect:this.$route.fullPath}});alert(a||e||"An error occurred. Please try again.")}},async created(){try{await this.$store.dispatch("checkAuth")}catch(t){}this.$store.dispatch("fetchCart")}},te=(0,y.A)(Zt,[["render",zt],["__scopeId","data-v-28aa7f8a"]]),ee=te,ae={class:"orders-page"},re={class:"container"},se={key:0,class:"empty-orders"},oe={key:1,class:"orders-list"},ie={class:"order-header"},ce={class:"order-date"},le={class:"order-body"},ne=["src","alt"],de={class:"order-details"},ue={class:"order-category"},pe={class:"order-info"},he={class:"order-actions"},me={class:"order-total"},ge={class:"total-amount"},ke=["onClick"];function ye(t,e,a,r,o,i){return(0,s.uX)(),(0,s.CE)("div",ae,[(0,s.Lk)("div",re,[e[8]||(e[8]=(0,s.Lk)("h1",{class:"page-title"},"My Orders",-1)),0===t.orders.length?((0,s.uX)(),(0,s.CE)("div",se,[e[1]||(e[1]=(0,s.Lk)("div",{class:"empty-icon"},"ðŸ“¦",-1)),e[2]||(e[2]=(0,s.Lk)("h2",null,"No orders yet",-1)),e[3]||(e[3]=(0,s.Lk)("p",null,"Start shopping to see your orders here!",-1)),(0,s.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/")),class:"btn btn-primary"}," Start Shopping ")])):((0,s.uX)(),(0,s.CE)("div",oe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.orders,t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id,class:(0,c.C4)(["order-card",{cancelled:t.is_cancelled}])},[(0,s.Lk)("div",ie,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,"Order #"+(0,c.v_)(t.id),1),(0,s.Lk)("p",ce,(0,c.v_)(i.formatDate(t.created_at)),1)]),(0,s.Lk)("span",{class:(0,c.C4)(["order-status",{cancelled:t.is_cancelled}])},(0,c.v_)(t.is_cancelled?"Cancelled":"Active"),3)]),(0,s.Lk)("div",le,[(0,s.Lk)("img",{src:t.product.image_url,alt:t.product.title,class:"order-image"},null,8,ne),(0,s.Lk)("div",de,[(0,s.Lk)("h4",null,(0,c.v_)(t.product.title),1),(0,s.Lk)("p",ue,(0,c.v_)(t.product.category),1),(0,s.Lk)("div",pe,[(0,s.Lk)("span",null,[e[4]||(e[4]=(0,s.eW)("Quantity: ",-1)),(0,s.Lk)("strong",null,(0,c.v_)(t.quantity),1)]),(0,s.Lk)("span",null,[e[5]||(e[5]=(0,s.eW)("Price: ",-1)),(0,s.Lk)("strong",null,"$"+(0,c.v_)(i.formatPrice(t.price)),1)]),(0,s.Lk)("span",null,[e[6]||(e[6]=(0,s.eW)("Payment: ",-1)),(0,s.Lk)("strong",null,(0,c.v_)(t.payment_mode),1)])])]),(0,s.Lk)("div",he,[(0,s.Lk)("div",me,[e[7]||(e[7]=(0,s.Lk)("span",null,"Total",-1)),(0,s.Lk)("span",ge,"$"+(0,c.v_)(i.formatPrice(t.price*t.quantity)),1)]),t.is_cancelled?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>i.cancelOrder(t.id),class:"btn btn-danger"}," Cancel Order ",8,ke))])])],2))),128))]))])])}const fe={name:"Orders",computed:{...(0,m.aH)(["orders"])},methods:{formatPrice(t){const e=Number(t||0);return isNaN(e)?"0.00":e.toFixed(2)},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},async cancelOrder(t){if(confirm("Are you sure you want to cancel this order?"))try{await this.$store.dispatch("cancelOrder",t),alert("Order cancelled successfully!"),await this.$store.dispatch("fetchOrders")}catch(e){this.handleActionError(e,"Error cancelling order. Please try again.")}},handleActionError(t,e="An error occurred. Please try again."){const a=t?.response?.data?.error||t?.response?.data?.detail,r=t?.response?.status;if(401===r||403===r)return alert(a||"Please login to continue."),void this.$router.push({name:"Login",query:{redirect:this.$route.fullPath}});alert(a||e)}},async created(){try{await this.$store.dispatch("checkAuth")}catch(t){}try{await this.$store.dispatch("fetchOrders")}catch(e){console.error("Error fetching orders:",e)}}},Le=(0,y.A)(fe,[["render",ye],["__scopeId","data-v-46bfa64f"]]),be=Le,ve={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"https://priya2625.pythonanywhere.com/api",Ce=g.A.create({baseURL:ve,withCredentials:!0});function _e(t){const e=document.cookie.match(new RegExp("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)"));return e?e.pop():null}Ce.interceptors.request.use(t=>{const e=_e("csrftoken");return e&&(t.headers["X-CSRFToken"]=e),t});const Pe=Ce;function Ee(t){const e=document.cookie.match(new RegExp("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)"));return e?e.pop():null}async function Se(){try{const t=Ee("csrftoken");t||await Pe.get("/")}catch(t){}}const we=(0,m.y$)({state:{user:null,products:[],cart:[],orders:[],mostBought:[],filters:{category:"",minPrice:0,maxPrice:2e3,search:"",isSale:null},loading:!1},getters:{isAuthenticated:t=>!!t.user,filteredProducts:t=>t.products,cartTotal:t=>t.cart.reduce((t,e)=>t+e.product.price*e.quantity,0),cartItemCount:t=>t.cart.reduce((t,e)=>t+e.quantity,0)},mutations:{SET_USER(t,e){t.user=e},SET_PRODUCTS(t,e){t.products=e},SET_CART(t,e){t.cart=e},SET_ORDERS(t,e){t.orders=e},SET_MOST_BOUGHT(t,e){t.mostBought=e},SET_FILTERS(t,e){t.filters={...t.filters,...e}},SET_LOADING(t,e){t.loading=e},CLEAR_USER(t){t.user=null,t.cart=[],t.orders=[]}},actions:{async login({commit:t,dispatch:e},{mobile:a,otp:r,full_name:s}){await Se();const o=await Pe.post("/auth/login/",{mobile:a,otp:r,full_name:s});return t("SET_USER",o.data.user),await e("fetchCart"),o.data},async logout({commit:t}){try{await Se(),await Pe.post("/auth/logout/"),t("CLEAR_USER")}catch(e){console.error("Logout failed",e)}},async fetchProducts({commit:t,state:e}){t("SET_LOADING",!0);const a={};e.filters.category&&(a.category=e.filters.category),e.filters.search&&(a.search=e.filters.search),e.filters.minPrice&&(a.min_price=e.filters.minPrice),e.filters.maxPrice&&(a.max_price=e.filters.maxPrice),null!==e.filters.isSale&&(a.is_sale=e.filters.isSale);const r=await Pe.get("/products/",{params:a});t("SET_PRODUCTS",r.data),t("SET_LOADING",!1)},async fetchMostBought({commit:t}){const e=await Pe.get("/products/most_bought/");t("SET_MOST_BOUGHT",e.data)},async fetchCart({commit:t}){const e=await Pe.get("/cart/");t("SET_CART",e.data)},async addToCart({dispatch:t},e){await Se(),await Pe.post("/cart/",{product_id:e,quantity:1}),await t("fetchCart")},async updateCartQuantity({dispatch:t},{id:e,action:a}){await Se(),await Pe.post(`/cart/${e}/update_quantity/`,{action:a}),await t("fetchCart")},async removeFromCart({dispatch:t},e){await Se(),await Pe.delete(`/cart/${e}/`),await t("fetchCart")},async fetchOrders({commit:t}){const e=await Pe.get("/orders/");t("SET_ORDERS",e.data)},async placeOrder({dispatch:t},e){await Se(),await Pe.post("/orders/",{payment_mode:e}),await t("fetchCart"),await t("fetchOrders"),await t("fetchMostBought")},async cancelOrder({dispatch:t},e){await Se(),await Pe.post(`/orders/${e}/cancel/`),await t("fetchOrders"),await t("fetchMostBought")}}}),Te=[{path:"/",name:"Home",component:kt},{path:"/login",name:"Login",component:Tt},{path:"/cart",name:"Cart",component:ee,meta:{requiresAuth:!0}},{path:"/orders",name:"Orders",component:be,meta:{requiresAuth:!0}}],Ae=(0,_.aE)({history:(0,_.LA)("/"),routes:Te});Ae.beforeEach(async(t,e,a)=>{if(t.matched.some(t=>t.meta.requiresAuth)){if(!we.getters.isAuthenticated)try{await we.dispatch("checkAuth")}catch(r){}we.getters.isAuthenticated?a():a({name:"Login",query:{redirect:t.fullPath}})}else a()});const Oe=Ae;g.A.defaults.baseURL="https://priya2625.pythonanywhere.com",g.A.defaults.withCredentials=!0;const $e=(0,r.Ef)(C);$e.config.globalProperties.$axios=g.A,$e.use(we),$e.use(Oe),$e.mount("#app")}},e={};function a(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,a),o.exports}a.m=t,(()=>{var t=[];a.O=(e,r,s,o)=>{if(!r){var i=1/0;for(d=0;d<t.length;d++){for(var[r,s,o]=t[d],c=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every(t=>a.O[t](r[l]))?r.splice(l--,1):(c=!1,o<i&&(i=o));if(c){t.splice(d--,1);var n=s();void 0!==n&&(e=n)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[r,s,o]}})(),(()=>{a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={524:0};a.O.j=e=>0===t[e];var e=(e,r)=>{var s,o,[i,c,l]=r,n=0;if(i.some(e=>0!==t[e])){for(s in c)a.o(c,s)&&(a.m[s]=c[s]);if(l)var d=l(a)}for(e&&e(r);n<i.length;n++)o=i[n],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},r=self["webpackChunkecommerce_frontend"]=self["webpackChunkecommerce_frontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=a.O(void 0,[504],()=>a(451));r=a.O(r)})();
//# sourceMappingURL=app.7359ad37.js.map