(()=>{"use strict";var t={251:(t,e,a)=>{var r=a(751),o=a(641);const s={id:"app"};function c(t,e,a,r,c,i){const l=(0,o.g2)("nav-bar"),n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(l),(0,o.bF)(n)])}var i=a(33);const l={class:"navbar"},n={class:"container nav-content"},d={class:"nav-links"},u={key:0,class:"cart-badge"},h=["disabled"];function p(t,e,a,r,s,c){const p=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",l,[(0,o.Lk)("div",n,[(0,o.Lk)("div",{class:"nav-brand",onClick:e[0]||(e[0]=e=>t.$router.push("/"))},[...e[2]||(e[2]=[(0,o.Lk)("span",{class:"brand-icon"},"ðŸ›’",-1),(0,o.Lk)("span",{class:"brand-text"},"ShopHub",-1)])]),(0,o.Lk)("div",d,[(0,o.bF)(p,{to:"/",class:"nav-link"},{default:(0,o.k6)(()=>[...e[3]||(e[3]=[(0,o.eW)("Home",-1)])]),_:1}),t.isAuthenticated?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bF)(p,{to:"/cart",class:"nav-link cart-link"},{default:(0,o.k6)(()=>[e[4]||(e[4]=(0,o.eW)(" Cart ",-1)),t.cartItemCount?((0,o.uX)(),(0,o.CE)("span",u,(0,i.v_)(t.cartItemCount),1)):(0,o.Q3)("",!0)]),_:1}),(0,o.bF)(p,{to:"/orders",class:"nav-link"},{default:(0,o.k6)(()=>[...e[5]||(e[5]=[(0,o.eW)("Orders",-1)])]),_:1}),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>c.handleLogout&&c.handleLogout(...t)),class:"btn btn-outline",disabled:s.loading},(0,i.v_)(s.loading?"Logging out...":"Logout"),9,h)],64)):((0,o.uX)(),(0,o.Wv)(p,{key:1,to:"/login",class:"btn btn-primary"},{default:(0,o.k6)(()=>[...e[6]||(e[6]=[(0,o.eW)("Login",-1)])]),_:1}))])])])}var m=a(278),g=a(335);const k={name:"NavBar",data(){return{loading:!1}},computed:{...(0,m.L8)(["isAuthenticated","cartItemCount"])},methods:{async handleLogout(){this.loading=!0;try{await g.A.get("/api/"),await this.$store.dispatch("logout"),this.$router.push("/login")}catch(t){console.error("Logout error:",t),alert(t?.response?.data?.error||"Logout failed. Try again.")}finally{this.loading=!1}}}};var y=a(262);const f=(0,y.A)(k,[["render",p],["__scopeId","data-v-06dc3c30"]]),L=f,b={name:"App",components:{NavBar:L},async created(){try{await g.A.get("/api/"),await this.$store.dispatch("checkAuth")}catch(t){console.error("App init error (CSRF/auth):",t)}}},v=(0,y.A)(b,[["render",c]]),C=v;var E=a(499);const _={class:"home"},P={class:"container"},S={key:0,class:"most-bought-section"},A={class:"most-bought-grid"},w=["src","alt"],T={class:"most-bought-info"},O={class:"price"},$={class:"main-content"},F={class:"sidebar"},M={class:"products-section"},x={key:0,class:"spinner"},R={key:1,class:"products-grid"},X={key:2,class:"no-products"};function I(t,e,a,r,s,c){const l=(0,o.g2)("filter-sidebar"),n=(0,o.g2)("product-card");return(0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",P,[t.mostBought.length?((0,o.uX)(),(0,o.CE)("section",S,[e[1]||(e[1]=(0,o.Lk)("h2",{class:"section-title"},"ðŸ”¥ Most Bought Products",-1)),(0,o.Lk)("div",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.mostBought.slice(0,5),t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"most-bought-card"},[(0,o.Lk)("img",{src:t.image_url,alt:t.title},null,8,w),(0,o.Lk)("div",T,[(0,o.Lk)("h4",null,(0,i.v_)(t.title),1),(0,o.Lk)("p",O,"$"+(0,i.v_)(c.formatPrice(t.price)),1)])]))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",$,[(0,o.Lk)("aside",F,[(0,o.bF)(l)]),(0,o.Lk)("main",M,[e[3]||(e[3]=(0,o.Lk)("h2",{class:"section-title"},"All Products",-1)),t.loading?((0,o.uX)(),(0,o.CE)("div",x)):t.products.length?((0,o.uX)(),(0,o.CE)("div",R,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.products,t=>((0,o.uX)(),(0,o.Wv)(n,{key:t.id,product:t},null,8,["product"]))),128))])):((0,o.uX)(),(0,o.CE)("div",X,[e[2]||(e[2]=(0,o.Lk)("p",null,"No products found matching your filters.",-1)),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>c.resetFilters&&c.resetFilters(...t)),class:"btn btn-primary"},"Reset Filters")]))])])])])}const U={class:"product-card"},N={class:"product-image-wrapper"},q=["src","alt"],D={key:0,class:"sale-badge"},B={class:"product-info"},Q={class:"product-title"},H={class:"product-category"},W={class:"product-description"},j={class:"product-footer"},V={class:"product-price"},J=["disabled"];function K(t,e,a,r,s,c){return(0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",N,[(0,o.Lk)("img",{src:a.product.image_url,alt:a.product.title,class:"product-image"},null,8,q),a.product.is_sale?((0,o.uX)(),(0,o.CE)("span",D,"SALE")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",B,[(0,o.Lk)("h3",Q,(0,i.v_)(a.product.title),1),(0,o.Lk)("p",H,(0,i.v_)(a.product.category),1),(0,o.Lk)("p",W,(0,i.v_)(c.truncatedDescription),1),(0,o.Lk)("div",j,[(0,o.Lk)("span",V,"$"+(0,i.v_)(c.formatPrice(a.product.price)),1),t.isAuthenticated?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>c.addToCart&&c.addToCart(...t)),disabled:s.loading,class:"btn btn-primary btn-sm"},(0,i.v_)(s.loading?"Adding...":"Add to Cart"),9,J)):((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:e[1]||(e[1]=e=>t.$router.push("/login")),class:"btn btn-outline btn-sm"}," Login to Buy "))])])])}const G={name:"ProductCard",props:{product:{type:Object,required:!0}},data(){return{loading:!1}},computed:{...(0,m.L8)(["isAuthenticated"]),truncatedDescription(){return this.product.description.length>80?this.product.description.substring(0,80)+"...":this.product.description}},methods:{formatPrice(t){return parseFloat(t).toFixed(2)},async addToCart(){this.loading=!0;try{await this.$store.dispatch("addToCart",this.product.id),alert("Added to cart!")}catch(t){const e=t?.response?.data?.error||t?.response?.data?.detail,a=t?.response?.status;401===a||403===a?this.$router.push("/login"):alert(e||"Error adding to cart")}finally{this.loading=!1}}}},Y=(0,y.A)(G,[["render",K],["__scopeId","data-v-df763686"]]),z=Y,Z={class:"filter-sidebar"},tt={class:"filter-section"},et={class:"filter-section"},at={class:"category-list"},rt=["onClick"],ot={class:"filter-section"},st={class:"filter-label"},ct={class:"price-inputs"},it={class:"filter-section"},lt={class:"checkbox-group"},nt={class:"checkbox-label"};function dt(t,e,a,s,c,l){return(0,o.uX)(),(0,o.CE)("div",Z,[e[14]||(e[14]=(0,o.Lk)("h2",{class:"filter-title"},"Filters",-1)),(0,o.Lk)("div",tt,[e[10]||(e[10]=(0,o.Lk)("label",{class:"filter-label"},"Search",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.localSearch=t),onInput:e[1]||(e[1]=(...t)=>l.debouncedSearch&&l.debouncedSearch(...t)),type:"text",placeholder:"Search products...",class:"form-input"},null,544),[[r.Jo,c.localSearch]])]),(0,o.Lk)("div",et,[e[11]||(e[11]=(0,o.Lk)("label",{class:"filter-label"},"Category",-1)),(0,o.Lk)("div",at,[(0,o.Lk)("button",{onClick:e[2]||(e[2]=t=>l.selectCategory("")),class:(0,i.C4)(["category-btn",{active:!t.filters.category}])}," All ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.categories,e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>l.selectCategory(e),class:(0,i.C4)(["category-btn",{active:t.filters.category===e}])},(0,i.v_)(e),11,rt))),128))])]),(0,o.Lk)("div",ot,[(0,o.Lk)("label",st," Price Range: $"+(0,i.v_)(c.localMinPrice)+" - $"+(0,i.v_)(c.localMaxPrice),1),(0,o.Lk)("div",ct,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>c.localMinPrice=t),onChange:e[4]||(e[4]=(...t)=>l.updatePriceRange&&l.updatePriceRange(...t)),type:"range",min:"0",max:"2000",step:"50",class:"price-slider"},null,544),[[r.Jo,c.localMinPrice,void 0,{number:!0}]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>c.localMaxPrice=t),onChange:e[6]||(e[6]=(...t)=>l.updatePriceRange&&l.updatePriceRange(...t)),type:"range",min:"0",max:"2000",step:"50",class:"price-slider"},null,544),[[r.Jo,c.localMaxPrice,void 0,{number:!0}]])])]),(0,o.Lk)("div",it,[e[13]||(e[13]=(0,o.Lk)("label",{class:"filter-label"},"Special Offers",-1)),(0,o.Lk)("div",lt,[(0,o.Lk)("label",nt,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=t=>c.onSale=t),onChange:e[8]||(e[8]=(...t)=>l.updateSaleFilter&&l.updateSaleFilter(...t))},null,544),[[r.lH,c.onSale]]),e[12]||(e[12]=(0,o.Lk)("span",null,"On Sale Only",-1))])])]),(0,o.Lk)("button",{onClick:e[9]||(e[9]=(...t)=>l.resetFilters&&l.resetFilters(...t)),class:"btn btn-danger btn-block"}," Reset Filters ")])}const ut={name:"FilterSidebar",data(){return{categories:["Electronics","Fashion","Home","Sports"],localSearch:"",localMinPrice:0,localMaxPrice:2e3,onSale:!1,debounceTimer:null}},computed:{...(0,m.aH)(["filters"])},methods:{selectCategory(t){this.$store.commit("SET_FILTERS",{category:t}),this.$store.dispatch("fetchProducts")},debouncedSearch(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.$store.commit("SET_FILTERS",{search:this.localSearch}),this.$store.dispatch("fetchProducts")},500)},updatePriceRange(){if(this.localMinPrice>this.localMaxPrice){const t=this.localMinPrice;this.localMinPrice=this.localMaxPrice,this.localMaxPrice=t}this.$store.commit("SET_FILTERS",{minPrice:this.localMinPrice,maxPrice:this.localMaxPrice}),this.$store.dispatch("fetchProducts")},updateSaleFilter(){this.$store.commit("SET_FILTERS",{isSale:!!this.onSale||null}),this.$store.dispatch("fetchProducts")},resetFilters(){this.localSearch="",this.localMinPrice=0,this.localMaxPrice=2e3,this.onSale=!1,this.$store.commit("SET_FILTERS",{category:"",minPrice:0,maxPrice:2e3,search:"",isSale:null}),this.$store.dispatch("fetchProducts")}},mounted(){this.localMinPrice=this.filters.minPrice,this.localMaxPrice=this.filters.maxPrice,this.localSearch=this.filters.search,this.onSale=!0===this.filters.isSale},watch:{filters:{handler(t){this.localMinPrice=t.minPrice??0,this.localMaxPrice=t.maxPrice??2e3,this.localSearch=t.search??"",this.onSale=!0===t.isSale},deep:!0}},beforeUnmount(){this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null)}},ht=(0,y.A)(ut,[["render",dt],["__scopeId","data-v-08e51d11"]]),pt=ht,mt={name:"Home",components:{ProductCard:z,FilterSidebar:pt},computed:{...(0,m.aH)(["products","mostBought","loading"])},methods:{formatPrice(t){const e=Number(t||0);return isNaN(e)?"0.00":e.toFixed(2)},resetFilters(){this.$store.commit("SET_FILTERS",{category:"",minPrice:0,maxPrice:2e3,search:"",isSale:null}),this.$store.dispatch("fetchProducts")}},async created(){try{await this.$store.dispatch("checkAuth")}catch(t){}try{await Promise.all([this.$store.dispatch("fetchProducts"),this.$store.dispatch("fetchMostBought")])}catch(e){console.error("Error loading products:",e)}}},gt=(0,y.A)(mt,[["render",I],["__scopeId","data-v-e4d0abcc"]]),kt=gt,yt={class:"login-page"},ft={class:"login-container"},Lt={class:"login-card"},bt={class:"form-group"},vt={class:"form-group"},Ct={class:"form-group"},Et=["disabled"],_t={key:0,class:"error-message"};function Pt(t,e,a,s,c,l){return(0,o.uX)(),(0,o.CE)("div",yt,[(0,o.Lk)("div",ft,[(0,o.Lk)("div",Lt,[e[8]||(e[8]=(0,o.Lk)("div",{class:"login-header"},[(0,o.Lk)("h1",null,"Welcome Back!"),(0,o.Lk)("p",null,"Login to continue shopping")],-1)),(0,o.Lk)("form",{onSubmit:e[3]||(e[3]=(0,r.D$)((...t)=>l.handleLogin&&l.handleLogin(...t),["prevent"])),class:"login-form"},[(0,o.Lk)("div",bt,[e[4]||(e[4]=(0,o.Lk)("label",{class:"form-label"},"Mobile Number",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>c.mobile=t),type:"tel",placeholder:"Enter your mobile number",class:"form-input",required:""},null,512),[[r.Jo,c.mobile]])]),(0,o.Lk)("div",vt,[e[5]||(e[5]=(0,o.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>c.fullName=t),type:"text",placeholder:"Enter your full name",class:"form-input",required:""},null,512),[[r.Jo,c.fullName]])]),(0,o.Lk)("div",Ct,[e[6]||(e[6]=(0,o.Lk)("label",{class:"form-label"},"OTP",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>c.otp=t),type:"text",placeholder:"Enter OTP (123456)",class:"form-input",required:""},null,512),[[r.Jo,c.otp]]),e[7]||(e[7]=(0,o.Lk)("small",{class:"form-hint"},"Demo OTP: 123456",-1))]),(0,o.Lk)("button",{type:"submit",disabled:c.loading,class:"btn btn-primary btn-block btn-large"},(0,i.v_)(c.loading?"Logging in...":"Login"),9,Et),c.error?((0,o.uX)(),(0,o.CE)("p",_t,(0,i.v_)(c.error),1)):(0,o.Q3)("",!0)],32),e[9]||(e[9]=(0,o.Lk)("div",{class:"login-footer"},[(0,o.Lk)("p",null,"Demo Credentials:"),(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"Mobile:"),(0,o.eW)(" 9999999999")]),(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"OTP:"),(0,o.eW)(" 123456")])],-1))])])])}const St={name:"Login",data(){return{mobile:"",fullName:"",otp:"",loading:!1,error:""}},methods:{async handleLogin(){this.loading=!0,this.error="";try{const t={mobile:this.mobile,otp:this.otp,full_name:this.fullName||"User"};await this.$store.dispatch("login",t),this.$router.push("/")}catch(t){this.error=t?.response?.data?.error||t?.response?.data?.detail||"Login failed. Please try again."}finally{this.loading=!1}}}},At=(0,y.A)(St,[["render",Pt],["__scopeId","data-v-5967fba6"]]),wt=At,Tt={class:"cart-page"},Ot={class:"container"},$t={key:0,class:"empty-cart"},Ft={key:1,class:"cart-content"},Mt={class:"cart-items"},xt=["src","alt"],Rt={class:"item-details"},Xt={class:"item-category"},It={class:"item-price"},Ut={class:"item-actions"},Nt={class:"quantity-control"},qt=["onClick"],Dt={class:"quantity"},Bt=["onClick"],Qt=["onClick"],Ht={class:"item-total"},Wt={class:"cart-summary"},jt={class:"summary-row"},Vt={class:"summary-row total"},Jt={class:"payment-options"},Kt={class:"radio-label"},Gt={class:"radio-label"},Yt=["disabled"];function zt(t,e,a,s,c,l){return(0,o.uX)(),(0,o.CE)("div",Tt,[(0,o.Lk)("div",Ot,[e[11]||(e[11]=(0,o.Lk)("h1",{class:"page-title"},"Shopping Cart",-1)),0===t.cart.length?((0,o.uX)(),(0,o.CE)("div",$t,[e[4]||(e[4]=(0,o.Lk)("div",{class:"empty-icon"},"ðŸ›’",-1)),e[5]||(e[5]=(0,o.Lk)("h2",null,"Your cart is empty",-1)),e[6]||(e[6]=(0,o.Lk)("p",null,"Add some products to get started!",-1)),(0,o.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/")),class:"btn btn-primary"}," Continue Shopping ")])):((0,o.uX)(),(0,o.CE)("div",Ft,[(0,o.Lk)("div",Mt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.cart,t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"cart-item"},[(0,o.Lk)("img",{src:t.product.image_url,alt:t.product.title,class:"item-image"},null,8,xt),(0,o.Lk)("div",Rt,[(0,o.Lk)("h3",null,(0,i.v_)(t.product.title),1),(0,o.Lk)("p",Xt,(0,i.v_)(t.product.category),1),(0,o.Lk)("p",It,"$"+(0,i.v_)(l.formatPrice(t.product.price)),1)]),(0,o.Lk)("div",Ut,[(0,o.Lk)("div",Nt,[(0,o.Lk)("button",{onClick:e=>l.decreaseQuantity(t.id),class:"qty-btn"},"-",8,qt),(0,o.Lk)("span",Dt,(0,i.v_)(t.quantity),1),(0,o.Lk)("button",{onClick:e=>l.increaseQuantity(t.id),class:"qty-btn"},"+",8,Bt)]),(0,o.Lk)("button",{onClick:e=>l.removeItem(t.id),class:"btn-remove"}," Remove ",8,Qt)]),(0,o.Lk)("div",Ht," $"+(0,i.v_)(l.formatPrice(t.product.price*t.quantity)),1)]))),128))]),(0,o.Lk)("div",Wt,[e[10]||(e[10]=(0,o.Lk)("h2",null,"Order Summary",-1)),(0,o.Lk)("div",jt,[(0,o.Lk)("span",null,"Items ("+(0,i.v_)(t.cartItemCount)+")",1),(0,o.Lk)("span",null,"$"+(0,i.v_)(l.formatPrice(t.cartTotal)),1)]),(0,o.Lk)("div",Vt,[e[7]||(e[7]=(0,o.Lk)("span",null,"Total",-1)),(0,o.Lk)("span",null,"$"+(0,i.v_)(l.formatPrice(t.cartTotal)),1)]),(0,o.Lk)("div",Jt,[(0,o.Lk)("label",Kt,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=t=>c.paymentMode=t),value:"COD"},null,512),[[r.XL,c.paymentMode]]),e[8]||(e[8]=(0,o.Lk)("span",null,"Cash on Delivery",-1))]),(0,o.Lk)("label",Gt,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=t=>c.paymentMode=t),value:"ONLINE"},null,512),[[r.XL,c.paymentMode]]),e[9]||(e[9]=(0,o.Lk)("span",null,"Online Payment",-1))])]),(0,o.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>l.checkout&&l.checkout(...t)),disabled:c.loading,class:"btn btn-success btn-block btn-large"},(0,i.v_)(c.loading?"Processing...":"Place Order"),9,Yt)])]))])])}const Zt={name:"Cart",data(){return{loading:!1,paymentMode:"COD"}},computed:{...(0,m.aH)(["cart"]),...(0,m.L8)(["cartTotal","cartItemCount"])},methods:{formatPrice(t){const e=Number(t||0);return isNaN(e)?"0.00":e.toFixed(2)},async increaseQuantity(t){try{await this.$store.dispatch("updateCartQuantity",{id:t,action:"increase"})}catch(e){this.handleActionError(e)}},async decreaseQuantity(t){try{await this.$store.dispatch("updateCartQuantity",{id:t,action:"decrease"})}catch(e){this.handleActionError(e)}},async removeItem(t){if(confirm("Remove this item from cart?"))try{await this.$store.dispatch("removeFromCart",t)}catch(e){this.handleActionError(e)}},async checkout(){this.loading=!0;try{await this.$store.dispatch("placeOrder",this.paymentMode),alert("Order placed successfully!"),this.$router.push("/orders")}catch(t){this.handleActionError(t,"Error placing order. Please try again.")}finally{this.loading=!1}},handleActionError(t,e=null){const a=t?.response?.data?.error||t?.response?.data?.detail,r=t?.response?.status;if(401===r||403===r)return alert(a||"Please login to continue."),void this.$router.push({name:"Login",query:{redirect:this.$route.fullPath}});alert(a||e||"An error occurred. Please try again.")}},async created(){try{await this.$store.dispatch("checkAuth")}catch(t){}this.$store.dispatch("fetchCart")}},te=(0,y.A)(Zt,[["render",zt],["__scopeId","data-v-28aa7f8a"]]),ee=te,ae={class:"orders-page"},re={class:"container"},oe={key:0,class:"empty-orders"},se={key:1,class:"orders-list"},ce={class:"order-header"},ie={class:"order-date"},le={class:"order-body"},ne=["src","alt"],de={class:"order-details"},ue={class:"order-category"},he={class:"order-info"},pe={class:"order-actions"},me={class:"order-total"},ge={class:"total-amount"},ke=["onClick"];function ye(t,e,a,r,s,c){return(0,o.uX)(),(0,o.CE)("div",ae,[(0,o.Lk)("div",re,[e[8]||(e[8]=(0,o.Lk)("h1",{class:"page-title"},"My Orders",-1)),0===t.orders.length?((0,o.uX)(),(0,o.CE)("div",oe,[e[1]||(e[1]=(0,o.Lk)("div",{class:"empty-icon"},"ðŸ“¦",-1)),e[2]||(e[2]=(0,o.Lk)("h2",null,"No orders yet",-1)),e[3]||(e[3]=(0,o.Lk)("p",null,"Start shopping to see your orders here!",-1)),(0,o.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/")),class:"btn btn-primary"}," Start Shopping ")])):((0,o.uX)(),(0,o.CE)("div",se,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.orders,t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:(0,i.C4)(["order-card",{cancelled:t.is_cancelled}])},[(0,o.Lk)("div",ce,[(0,o.Lk)("div",null,[(0,o.Lk)("h3",null,"Order #"+(0,i.v_)(t.id),1),(0,o.Lk)("p",ie,(0,i.v_)(c.formatDate(t.created_at)),1)]),(0,o.Lk)("span",{class:(0,i.C4)(["order-status",{cancelled:t.is_cancelled}])},(0,i.v_)(t.is_cancelled?"Cancelled":"Active"),3)]),(0,o.Lk)("div",le,[(0,o.Lk)("img",{src:t.product.image_url,alt:t.product.title,class:"order-image"},null,8,ne),(0,o.Lk)("div",de,[(0,o.Lk)("h4",null,(0,i.v_)(t.product.title),1),(0,o.Lk)("p",ue,(0,i.v_)(t.product.category),1),(0,o.Lk)("div",he,[(0,o.Lk)("span",null,[e[4]||(e[4]=(0,o.eW)("Quantity: ",-1)),(0,o.Lk)("strong",null,(0,i.v_)(t.quantity),1)]),(0,o.Lk)("span",null,[e[5]||(e[5]=(0,o.eW)("Price: ",-1)),(0,o.Lk)("strong",null,"$"+(0,i.v_)(c.formatPrice(t.price)),1)]),(0,o.Lk)("span",null,[e[6]||(e[6]=(0,o.eW)("Payment: ",-1)),(0,o.Lk)("strong",null,(0,i.v_)(t.payment_mode),1)])])]),(0,o.Lk)("div",pe,[(0,o.Lk)("div",me,[e[7]||(e[7]=(0,o.Lk)("span",null,"Total",-1)),(0,o.Lk)("span",ge,"$"+(0,i.v_)(c.formatPrice(t.price*t.quantity)),1)]),t.is_cancelled?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e=>c.cancelOrder(t.id),class:"btn btn-danger"}," Cancel Order ",8,ke))])])],2))),128))]))])])}const fe={name:"Orders",computed:{...(0,m.aH)(["orders"])},methods:{formatPrice(t){const e=Number(t||0);return isNaN(e)?"0.00":e.toFixed(2)},formatDate(t){if(!t)return"";const e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},async cancelOrder(t){if(confirm("Are you sure you want to cancel this order?"))try{await this.$store.dispatch("cancelOrder",t),alert("Order cancelled successfully!"),await this.$store.dispatch("fetchOrders")}catch(e){this.handleActionError(e,"Error cancelling order. Please try again.")}},handleActionError(t,e="An error occurred. Please try again."){const a=t?.response?.data?.error||t?.response?.data?.detail,r=t?.response?.status;if(401===r||403===r)return alert(a||"Please login to continue."),void this.$router.push({name:"Login",query:{redirect:this.$route.fullPath}});alert(a||e)}},async created(){try{await this.$store.dispatch("checkAuth")}catch(t){}try{await this.$store.dispatch("fetchOrders")}catch(e){console.error("Error fetching orders:",e)}}},Le=(0,y.A)(fe,[["render",ye],["__scopeId","data-v-46bfa64f"]]),be=Le;function ve(t){const e=document.cookie.match(new RegExp("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)"));return e?e.pop():null}async function Ce(){try{const t=ve("csrftoken");t||await g.A.get("/api/")}catch(t){}}g.A.defaults.baseURL="http://localhost:8000",g.A.defaults.withCredentials=!0,g.A.interceptors.request.use(t=>{const e=ve("csrftoken");return e&&(t.headers["X-CSRFToken"]=e),t},t=>Promise.reject(t));const Ee=(0,m.y$)({state:{user:null,products:[],cart:[],orders:[],mostBought:[],filters:{category:"",minPrice:0,maxPrice:2e3,search:"",isSale:null},loading:!1},getters:{isAuthenticated:t=>!!t.user,filteredProducts:t=>t.products,cartTotal:t=>t.cart.reduce((t,e)=>t+e.product.price*e.quantity,0),cartItemCount:t=>t.cart.reduce((t,e)=>t+e.quantity,0)},mutations:{SET_USER(t,e){t.user=e},SET_PRODUCTS(t,e){t.products=e},SET_CART(t,e){t.cart=e},SET_ORDERS(t,e){t.orders=e},SET_MOST_BOUGHT(t,e){t.mostBought=e},SET_FILTERS(t,e){t.filters={...t.filters,...e}},SET_LOADING(t,e){t.loading=e},CLEAR_USER(t){t.user=null,t.cart=[],t.orders=[]}},actions:{async checkAuth({commit:t}){try{const e=await g.A.get("/api/auth/user/");return t("SET_USER",e.data),e.data}catch(e){return t("CLEAR_USER"),null}},async login({commit:t,dispatch:e},{mobile:a,otp:r,full_name:o="User"}){try{await Ce();const s=await g.A.post("/api/auth/login/",{mobile:a,otp:r,full_name:o});return t("SET_USER",s.data.user),await e("fetchCart"),s.data}catch(s){throw s}},async logout({commit:t}){try{await Ce(),await g.A.post("/api/auth/logout/"),t("CLEAR_USER")}catch(e){console.error("Logout error:",e)}},async fetchProducts({commit:t,state:e}){try{t("SET_LOADING",!0);const a={};e.filters.category&&(a.category=e.filters.category),e.filters.search&&(a.search=e.filters.search),e.filters.minPrice&&(a.min_price=e.filters.minPrice),e.filters.maxPrice&&(a.max_price=e.filters.maxPrice),null!==e.filters.isSale&&(a.is_sale=e.filters.isSale);const r=await g.A.get("/api/products/",{params:a});t("SET_PRODUCTS",r.data)}catch(a){console.error("Error fetching products:",a)}finally{t("SET_LOADING",!1)}},async fetchMostBought({commit:t}){try{const e=await g.A.get("/api/products/most_bought/");t("SET_MOST_BOUGHT",e.data)}catch(e){console.error("Error fetching most bought products:",e)}},async fetchCart({commit:t}){try{const e=await g.A.get("/api/cart/");t("SET_CART",e.data)}catch(e){console.error("Error fetching cart:",e)}},async addToCart({dispatch:t},e){try{await Ce(),await g.A.post("/api/cart/",{product_id:e,quantity:1}),await t("fetchCart")}catch(a){throw console.error("Error adding to cart:",a),a}},async updateCartQuantity({dispatch:t},{id:e,action:a}){try{await Ce(),await g.A.post(`/api/cart/${e}/update_quantity/`,{action:a}),await t("fetchCart")}catch(r){console.error("Error updating cart:",r)}},async removeFromCart({dispatch:t},e){try{await Ce(),await g.A.delete(`/api/cart/${e}/`),await t("fetchCart")}catch(a){console.error("Error removing from cart:",a)}},async fetchOrders({commit:t}){try{const e=await g.A.get("/api/orders/");t("SET_ORDERS",e.data)}catch(e){console.error("Error fetching orders:",e)}},async placeOrder({dispatch:t},e){try{await Ce(),await g.A.post("/api/orders/",{payment_mode:e}),await t("fetchCart"),await t("fetchOrders"),await t("fetchMostBought")}catch(a){throw console.error("Error placing order:",a),a}},async cancelOrder({dispatch:t},e){try{await Ce(),await g.A.post(`/api/orders/${e}/cancel/`),await t("fetchOrders"),await t("fetchMostBought")}catch(a){throw console.error("Error cancelling order:",a),a}}}}),_e=[{path:"/",name:"Home",component:kt},{path:"/login",name:"Login",component:wt},{path:"/cart",name:"Cart",component:ee,meta:{requiresAuth:!0}},{path:"/orders",name:"Orders",component:be,meta:{requiresAuth:!0}}],Pe=(0,E.aE)({history:(0,E.LA)("/"),routes:_e});Pe.beforeEach(async(t,e,a)=>{if(t.matched.some(t=>t.meta.requiresAuth)){if(!Ee.getters.isAuthenticated)try{await Ee.dispatch("checkAuth")}catch(r){}Ee.getters.isAuthenticated?a():a({name:"Login",query:{redirect:t.fullPath}})}else a()});const Se=Pe;g.A.defaults.baseURL="http://localhost:8000",g.A.defaults.withCredentials=!0;const Ae=(0,r.Ef)(C);Ae.config.globalProperties.$axios=g.A,Ae.use(Ee),Ae.use(Se),Ae.mount("#app")}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.m=t,(()=>{var t=[];a.O=(e,r,o,s)=>{if(!r){var c=1/0;for(d=0;d<t.length;d++){for(var[r,o,s]=t[d],i=!0,l=0;l<r.length;l++)(!1&s||c>=s)&&Object.keys(a.O).every(t=>a.O[t](r[l]))?r.splice(l--,1):(i=!1,s<c&&(c=s));if(i){t.splice(d--,1);var n=o();void 0!==n&&(e=n)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,o,s]}})(),(()=>{a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={524:0};a.O.j=e=>0===t[e];var e=(e,r)=>{var o,s,[c,i,l]=r,n=0;if(c.some(e=>0!==t[e])){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(e&&e(r);n<c.length;n++)s=c[n],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},r=self["webpackChunkecommerce_frontend"]=self["webpackChunkecommerce_frontend"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})();var r=a.O(void 0,[504],()=>a(251));r=a.O(r)})();
//# sourceMappingURL=app.52d711c6.js.map